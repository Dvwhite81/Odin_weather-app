(()=>{let t;const e=e=>{t=0,e.preventDefault();const a=document.getElementById("search-input"),o=a.value;a.value="",n(o)},n=async t=>{t=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)?`zip=${t},us`:`q=${t}`;const e=await a(t);c(e);const n=`lat=${e.coord.lat}&lon=${e.coord.lon}`,r=await o(n);i(r)},a=async t=>{const e=`https://api.openweathermap.org/data/2.5/weather?${t}&appid=90896309f65adc38c814061d0ba7a858&units=imperial`;return await r(e,t)},o=async t=>{const e=`https://api.openweathermap.org/data/2.5/forecast?${t}&appid=90896309f65adc38c814061d0ba7a858&units=imperial`;return await r(e,t)},r=async(e,a)=>{try{const o=await fetch(e);if(!o.ok){if(t++,t>2)throw Error;let e=a.split(",")[0];a=e.split("=")[1],n(a)}return await o.json()}catch(t){console.error("ERROR",t),alert("Try a different city")}},c=t=>{const e=t.name,n=t.main.temp+"°F",a=t.weather[0].description,o=t.weather[0].icon;s(e,n,a,`http://openweathermap.org/img/w/${o}.png`)},s=(t,e,n,a)=>{const o=document.querySelector(".main");o.innerHTML="";const r=l("h1",{textContent:"Current Conditions:"});o.append(r);const c=l("div",{className:"current-results"}),s=l("h2",{id:"city-name",textContent:t}),i=l("h3",{id:"current-temp",textContent:e}),m=l("p",{id:"current-description",textContent:n}),p=l("img",{id:"current-icon",src:a});c.append(s,i,m,p),o.append(c)},i=t=>{const[e,n,a]=[t.list[3],t.list[5],t.list[7]];e.timeName="6:00 am",n.timeName="12:00 pm",a.timeName="6:00 pm";const o=[e,n,a];m(),o.forEach((t=>p(t)))},m=()=>{const t=document.querySelector(".main"),e=l("div",{className:"tomorrow"}),n=l("h2",{textContent:"Tomorrow:"}),a=l("div",{className:"tomorrow-forecasts"});e.append(n,a),t.append(e)},p=t=>{const e=t.timeName,n=t.main.temp+"°F",a=t.weather[0].description,o=t.weather[0].icon;d(e,n,a,`http://openweathermap.org/img/w/${o}.png`)},d=(t,e,n,a)=>{const o=document.querySelector(".tomorrow-forecasts"),r=l("div",{className:"forecast-results"}),c=l("h3",{className:"forecast-name",textContent:t}),s=l("h4",{className:"forecast-temp",textContent:e}),i=l("p",{className:"forecast-description",textContent:n}),m=l("img",{className:"current-icon",src:a});r.append(c,s,i,m),o.append(r)},l=(t,e)=>{const n=document.createElement(t);for(const t in e)n[t]=e[t];return n};(()=>{const t=document.querySelector("svg"),n=document.getElementById("search-input");setTimeout((()=>{t.style.backgroundColor="white",t.style.color="black",n.setAttribute("placeholder","Enter a city or zip")}),4e3),document.getElementById("form").addEventListener("submit",e)})()})();