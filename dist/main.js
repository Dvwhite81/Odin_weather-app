(()=>{"use strict";let t;const e=async(e,a)=>{try{const n=await fetch(e);if(!n.ok){if(t++,t>2)throw Error;let e=a.split(",")[0];a=e.split("=")[1],await i(a)}return await n.json()}catch(t){console.error("ERROR",t),alert("Try a different city")}},a=document.querySelector(".main"),n=document.querySelector(".animation-div"),o=(t,e)=>{const a=document.createElement(t);for(const t in e)a[t]=e[t];return a};let r;const s=t=>{r=0,t.preventDefault(),a.style.display="none",n.style.display="flex";const e=document.getElementById("search-input"),o=e.value;e.value="",i(o)},i=async t=>{const a="90896309f65adc38c814061d0ba7a858",n=`https://api.openweathermap.org/data/2.5/weather?${t=/(^\d{5}$)|(^\d{5}-\d{4}$)/.test(t)?`zip=${t},us`:`q=${t}`}&appid=${a}&units=imperial`,o=`https://api.openweathermap.org/data/2.5/forecast?${t}&appid=${a}&units=imperial`,r=await(async(t,a)=>await e(t,a))(n,t);c(r);const s=`lat=${r.coord.lat}&lon=${r.coord.lon}`,i=await(async(t,a)=>await e(t,a))(o,s);m(i)},c=t=>{((t,e,n,r)=>{a.innerHTML="";const s=o("h1",{textContent:"Current Conditions:"});a.append(s);const i=o("div",{className:"current-results"}),c=o("h2",{id:"city-name",textContent:t}),m=o("h3",{id:"current-temp",textContent:e}),p=o("p",{id:"current-description",textContent:n}),d=o("img",{id:"current-icon",src:r});i.append(c,m,p,d),a.append(i)})(t.name,Math.round(t.main.temp)+"°F",t.weather[0].description,`http://openweathermap.org/img/w/${t.weather[0].icon}.png`)},m=t=>{const[e,n,r]=[t.list[3],t.list[5],t.list[7]];e.timeName="6:00 am",n.timeName="12:00 pm",r.timeName="6:00 pm";const s=[e,n,r];(()=>{const t=o("div",{className:"tomorrow"}),e=o("h2",{id:"tomorrow-h2",textContent:"Tomorrow:"}),n=o("div",{className:"tomorrow-forecasts"});t.append(e,n),a.append(t)})(),s.forEach((async t=>await p(t)))},p=t=>{((t,e,r,s)=>{const i=document.querySelector(".tomorrow-forecasts"),c=o("div",{className:"forecast-results"}),m=o("h4",{className:"forecast-name",textContent:t}),p=o("h5",{className:"forecast-temp",textContent:e}),d=o("p",{className:"forecast-description",textContent:r}),l=o("img",{className:"current-icon",src:s});c.append(m,p,d,l),i.append(c),setTimeout((()=>{a.style.display="grid",n.innerHTML="",n.style.display="none"}),2e3)})(t.timeName,Math.round(t.main.temp)+"°F",t.weather[0].description,`http://openweathermap.org/img/w/${t.weather[0].icon}.png`)};(()=>{document.querySelector("svg");const t=document.getElementById("search-input");setTimeout((()=>{t.setAttribute("placeholder","Enter a city or zip")}),4e3),document.getElementById("form").addEventListener("submit",s)})()})();